{
	"name": "Global",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Server"
		},
		{
			"eventType": "comment",
			"text": "Initialization flags"
		},
		{
			"eventType": "variable",
			"name": "GAME_init",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is it the very start of the game?",
			"isStatic": false,
			"isConstant": false,
			"sid": 962947344301577
		},
		{
			"eventType": "variable",
			"name": "GAME_load",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Have we tried to load yet?",
			"isStatic": false,
			"isConstant": false,
			"sid": 400279535474701
		},
		{
			"eventType": "comment",
			"text": "Game type flags"
		},
		{
			"eventType": "variable",
			"name": "GAME_mobile",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the game being played with touch controls?",
			"isStatic": false,
			"isConstant": false,
			"sid": 407265585322280
		},
		{
			"eventType": "variable",
			"name": "GAME_standalone",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the game a standalone version?",
			"isStatic": false,
			"isConstant": false,
			"sid": 995685769201095
		},
		{
			"eventType": "variable",
			"name": "GAME_online",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Are we online?",
			"isStatic": false,
			"isConstant": false,
			"sid": 399560700863166
		},
		{
			"eventType": "comment",
			"text": "Loading flags"
		},
		{
			"eventType": "variable",
			"name": "LOAD_save",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the save file loaded?",
			"isStatic": false,
			"isConstant": false,
			"sid": 264794377819010
		},
		{
			"eventType": "variable",
			"name": "LOAD_parts",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Are parts loaded?",
			"isStatic": false,
			"isConstant": false,
			"sid": 598680214337881
		},
		{
			"eventType": "comment",
			"text": "Settings"
		},
		{
			"eventType": "variable",
			"name": "SETTING_fullscreen",
			"type": "number",
			"initialValue": "0",
			"comment": "Fullscreen status; dynamically changed",
			"isStatic": false,
			"isConstant": false,
			"sid": 179305125864221
		},
		{
			"eventType": "comment",
			"text": "Global transition flags"
		},
		{
			"eventType": "variable",
			"name": "TRANSITION_running",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is a transition running?",
			"isStatic": false,
			"isConstant": false,
			"sid": 990990060792822
		},
		{
			"eventType": "variable",
			"name": "TRANSITION_movedLayout",
			"type": "boolean",
			"initialValue": "true",
			"comment": "Has the transition moved layouts?",
			"isStatic": false,
			"isConstant": false,
			"sid": 607851642029713
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Initialization",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 335955915937430
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 811944159369598,
							"parameters": {
								"variable": "GAME_init"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 946704931859414,
							"parameters": {
								"variable": "GAME_init",
								"value": "true"
							}
						},
						{
							"type": "comment",
							"text": "Load arrays"
						},
						{
							"id": "request-project-file",
							"objectClass": "AJAX",
							"sid": 633887216409071,
							"parameters": {
								"tag": "\"parts\"",
								"file": "parts.json"
							}
						}
					],
					"sid": 109141179522247,
					"children": [
						{
							"eventType": "comment",
							"text": "We're standalone"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-windows-webview2-export",
									"objectClass": "PlatformInfo",
									"sid": 224350974726437
								},
								{
									"id": "is-macos-wkwebview-export",
									"objectClass": "PlatformInfo",
									"sid": 829602362622825
								},
								{
									"id": "is-linux-cef-export",
									"objectClass": "PlatformInfo",
									"sid": 661404663321085
								},
								{
									"id": "is-in-preview",
									"objectClass": "System",
									"sid": 703275823135534,
									"disabled": true
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 746488863470078,
									"parameters": {
										"variable": "GAME_standalone",
										"value": "true"
									}
								}
							],
							"sid": 452062367688317,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "We're on mobile"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-on-mobile",
									"objectClass": "PlatformInfo",
									"sid": 810631885529324
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 422204368788419,
									"parameters": {
										"variable": "GAME_mobile",
										"value": "true"
									}
								}
							],
							"sid": 497561053059253
						}
					]
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Global - AJAX",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-completed",
									"objectClass": "AJAX",
									"sid": 440214056251527,
									"parameters": {
										"tag": "\"parts\""
									}
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 711256605459936,
									"parameters": {
										"variable": "LOAD_parts",
										"value": "true"
									}
								},
								{
									"id": "load",
									"objectClass": "Parts",
									"sid": 908042051702763,
									"parameters": {
										"json": "AJAX.LastData"
									}
								}
							],
							"sid": 511566996314262,
							"children": [
								{
									"eventType": "comment",
									"text": "This fixes issues in preview"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-in-preview",
											"objectClass": "System",
											"sid": 857395135634850
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 253296719154060,
											"parameters": {
												"first-value": "LayoutName",
												"comparison": 1,
												"second-value": "\"Loader\""
											}
										}
									],
									"actions": [
										{
											"id": "restart-layout",
											"objectClass": "System",
											"sid": 375589941572949
										}
									],
									"sid": 964587710858472
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Project can't load when these arrays aren't initialized"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-any-error",
									"objectClass": "AJAX",
									"sid": 315439405438717
								}
							],
							"actions": [
								{
									"callFunction": "loadComplete",
									"sid": 384208238951231,
									"parameters": [
										"1"
									]
								}
							],
							"sid": 507490482789908
						},
						{
							"eventType": "comment",
							"text": "Try to initiate load from local storage"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 426581602242972,
									"parameters": {
										"variable": "GAME_load"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 615712916398666,
									"parameters": {
										"variable": "GAME_load",
										"value": "true"
									}
								},
								{
									"id": "check-item-exists",
									"objectClass": "LocalStorage",
									"sid": 227529304999915,
									"parameters": {
										"key": "\"saveData1\""
									}
								}
							],
							"sid": 432481568114169
						}
					],
					"sid": 882930048962033
				}
			],
			"sid": 867835330598309
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Core Logic",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Input signals, for menus and such"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-key-pressed",
							"objectClass": "Keyboard",
							"sid": 727191375239650
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 996870111812566,
							"parameters": {
								"tag": "\"inputKeyboard\""
							}
						}
					],
					"sid": 502866726537902
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-click",
							"objectClass": "Mouse",
							"sid": 437172700693341
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 777287560701650,
							"parameters": {
								"tag": "\"inputMouse\""
							}
						}
					],
					"sid": 134940548235051,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-in-touch",
							"objectClass": "Touch",
							"sid": 523426427525745
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 813835561099967,
							"parameters": {
								"tag": "\"inputTouch\""
							}
						}
					],
					"sid": 666154280898187,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-key-released",
							"objectClass": "Keyboard",
							"sid": 434821225144844
						},
						{
							"id": "on-movement",
							"objectClass": "Mouse",
							"sid": 827058721706502
						},
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 919252453008920,
							"parameters": {
								"direction": "any"
							}
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 722407230240405,
							"parameters": {
								"tag": "\"inputMixed\""
							}
						}
					],
					"sid": 442189682028448,
					"isOrBlock": true
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Global - Fullscreen",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Global fullscreen logic"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 155821520712423,
									"parameters": {
										"key": 70
									}
								}
							],
							"actions": [],
							"sid": 738691964537577,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-fullscreen",
											"objectClass": "Browser",
											"sid": 781063148920599,
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "request-fullscreen",
											"objectClass": "Browser",
											"sid": 286100259290533,
											"parameters": {
												"mode": "stretch-letterbox-scale",
												"navigation-ui": "hide"
											}
										}
									],
									"sid": 534736673127166
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-pointer-lock",
											"objectClass": "Mouse",
											"sid": 415699415818024
										}
									],
									"actions": [
										{
											"id": "request-pointer-lock",
											"objectClass": "Mouse",
											"sid": 553984261761215,
											"parameters": {
												"unadjusted-movement": false
											}
										}
									],
									"sid": 809430725792374
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 268451051059547,
									"parameters": {
										"key": 27
									}
								}
							],
							"actions": [],
							"sid": 466272135959637,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-fullscreen",
											"objectClass": "Browser",
											"sid": 647511298494421
										}
									],
									"actions": [
										{
											"id": "cancel-fullscreen",
											"objectClass": "Browser",
											"sid": 333662706842389
										}
									],
									"sid": 934843066124839
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-pointer-lock",
											"objectClass": "Mouse",
											"sid": 254183900445408
										}
									],
									"actions": [
										{
											"id": "request-pointer-lock",
											"objectClass": "Mouse",
											"sid": 858146093385978,
											"parameters": {
												"unadjusted-movement": false
											}
										}
									],
									"sid": 392443654052895
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Fullscreen status has changed"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-fullscreen",
									"objectClass": "Browser",
									"sid": 927137681348916
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 671694128739538,
									"parameters": {
										"variable": "SETTING_fullscreen",
										"value": "1"
									}
								}
							],
							"sid": 832848798733814,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 643253179806765
										}
									],
									"actions": [
										{
											"id": "signal",
											"objectClass": "System",
											"sid": 416826441927277,
											"parameters": {
												"tag": "\"refreshToggles\""
											}
										}
									],
									"sid": 485236235179779
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 226153426644858
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 422914758752218,
									"parameters": {
										"variable": "SETTING_fullscreen",
										"value": "0"
									}
								}
							],
							"sid": 678025845406038,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 332937020591583
										}
									],
									"actions": [
										{
											"id": "signal",
											"objectClass": "System",
											"sid": 134236314217683,
											"parameters": {
												"tag": "\"refreshToggles\""
											}
										}
									],
									"sid": 982178288415076
								}
							]
						}
					],
					"sid": 848170105583906
				},
				{
					"functionName": "getValue",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "number",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "part",
							"type": "string",
							"initialValue": "head",
							"comment": "",
							"sid": 600313353284238
						},
						{
							"name": "parameter",
							"type": "string",
							"initialValue": "asset_id",
							"comment": "",
							"sid": 119809974082388
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 530881384694244,
					"children": [
						{
							"eventType": "comment",
							"text": "Integer"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 415528483280939,
									"parameters": {
										"variable": "parameter",
										"comparison": 0,
										"value": "\"asset_id\""
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 365788242129981,
									"parameters": {
										"variable": "parameter",
										"comparison": 0,
										"value": "\"rotation\""
									}
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 724644116214534,
									"parameters": {
										"value": "round(JSON.Get(\"character_data.\"&Parts.At(Parts.IndexOf(part), 1)&\".\"&part&\".\"&parameter))\n"
									}
								}
							],
							"sid": 553324754640402,
							"isOrBlock": true
						},
						{
							"eventType": "comment",
							"text": "Float"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 895277670414343
								}
							],
							"actions": [
								{
									"id": "set-function-return-value",
									"objectClass": "Functions",
									"sid": 887310550677022,
									"parameters": {
										"value": "round(JSON.Get(\"character_data.\"&Parts.At(Parts.IndexOf(part), 1)&\".\"&part&\".\"&parameter)*10)/10\n"
									}
								}
							],
							"sid": 464108742595759
						}
					]
				},
				{
					"functionName": "setValue",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "part",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 833501567843685
						},
						{
							"name": "parameter",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 481017863678310
						},
						{
							"name": "value",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 849586946700746
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-value",
							"objectClass": "JSON",
							"sid": 462407105658300,
							"parameters": {
								"path": "\"character_data.\"&Parts.At(Parts.IndexOf(part), 1)&\".\"&part&\".\"&parameter",
								"value": "round(value*10)/10"
							}
						}
					],
					"sid": 621690119288117
				},
				{
					"functionName": "toggleLayer",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "layer",
							"type": "string",
							"initialValue": "Parts",
							"comment": "",
							"sid": 104599149785732
						},
						{
							"name": "visibility",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 236202287376560
						},
						{
							"name": "enabled",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 267741797392413
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 404521152177923,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 751423156907067,
									"parameters": {
										"variable": "enabled"
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 610278873825385,
									"parameters": {
										"layer": "layer",
										"interactive": true
									}
								}
							],
							"sid": 117617432061700,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 473379956930061,
											"parameters": {
												"variable": "visibility"
											}
										}
									],
									"actions": [
										{
											"id": "set-layer-visible",
											"objectClass": "System",
											"sid": 315200166136493,
											"parameters": {
												"layer": "layer",
												"visibility": "visible"
											}
										}
									],
									"sid": 859235861093399
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 483225336670293
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 525237985779721,
									"parameters": {
										"layer": "layer",
										"interactive": false
									}
								}
							],
							"sid": 568675387925692,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 140578114170660,
											"parameters": {
												"variable": "visibility"
											}
										}
									],
									"actions": [
										{
											"id": "set-layer-visible",
											"objectClass": "System",
											"sid": 504893809784506,
											"parameters": {
												"layer": "layer",
												"visibility": "invisible"
											}
										}
									],
									"sid": 514669363966215
								}
							]
						}
					]
				},
				{
					"functionName": "error",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "text",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 923656045107121
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "play",
							"objectClass": "Audio",
							"sid": 245129945708990,
							"parameters": {
								"audio-file": "error",
								"loop": "not-looping",
								"volume": "-20",
								"stereo-pan": "0",
								"tag-optional": "\"\""
							}
						},
						{
							"id": "alert",
							"objectClass": "Browser",
							"sid": 457024904051535,
							"parameters": {
								"message": "text"
							}
						}
					],
					"sid": 533205646815653
				}
			],
			"sid": 105681604197051
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Transitions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "TRANSITION_layout",
					"type": "string",
					"initialValue": "Plaza",
					"comment": "Layout to move to during transition",
					"isStatic": true,
					"isConstant": false,
					"sid": 130197556402275
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squareSize",
					"type": "number",
					"initialValue": "10",
					"comment": "Square size, defined here",
					"isStatic": true,
					"isConstant": true,
					"sid": 116895204679513
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squareAmountX",
					"type": "number",
					"initialValue": "0",
					"comment": "Amount of squares to create on the X axis, determined at runtime",
					"isStatic": true,
					"isConstant": false,
					"sid": 419704741782169
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squareAmountY",
					"type": "number",
					"initialValue": "0",
					"comment": "Amount of squares to create on the Y axis, determined at runtime",
					"isStatic": true,
					"isConstant": false,
					"sid": 564387598816413
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squaresReady",
					"type": "boolean",
					"initialValue": "false",
					"comment": "Are all squares ready?",
					"isStatic": true,
					"isConstant": false,
					"sid": 553566298581460
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_snapshotReady",
					"type": "boolean",
					"initialValue": "false",
					"comment": "Is the snapshot ready?",
					"isStatic": true,
					"isConstant": false,
					"sid": 757773616769131
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squaresLoaded",
					"type": "number",
					"initialValue": "0",
					"comment": "Amount of squares with snapshot image loaded",
					"isStatic": true,
					"isConstant": false,
					"sid": 585053844716741
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Global - Transitions (Initialization)",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "transition",
							"functionDescription": "Pixelate transition effect between two layouts",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "layout",
									"type": "string",
									"initialValue": "Level",
									"comment": "",
									"sid": 372225208034038
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 611281440882290,
									"parameters": {
										"variable": "TRANSITION_running"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-size",
									"objectClass": "TransitionSquareList",
									"sid": 574419307005699,
									"parameters": {
										"width": "1",
										"height": "1",
										"depth": "1"
									}
								},
								{
									"id": "clear",
									"objectClass": "TransitionSquareList",
									"sid": 165310334802459,
									"parameters": {
										"value": "0"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 927396777200273,
									"parameters": {
										"variable": "TRANSITION_running",
										"value": "true"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 101237970749030,
									"parameters": {
										"variable": "TRANSITION_movedLayout",
										"value": "false"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 601707983777940,
									"parameters": {
										"variable": "TRANSITION_layout",
										"value": "layout"
									}
								},
								{
									"id": "set-cursor-style2",
									"objectClass": "Mouse",
									"sid": 408103702938976,
									"parameters": {
										"cursor-style": "normal"
									}
								},
								{
									"type": "comment",
									"text": "Initialization"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 590385969546263,
									"parameters": {
										"variable": "TRANSITION_squareAmountX",
										"value": "ceil(ViewportWidth(\"Transition\")/TRANSITION_squareSize)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 674157351106468,
									"parameters": {
										"variable": "TRANSITION_squareAmountY",
										"value": "ceil(ViewportHeight(\"Transition\")/TRANSITION_squareSize)"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 194403266251229,
									"parameters": {
										"variable": "TRANSITION_squaresReady",
										"value": "false"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 708034889731857,
									"parameters": {
										"variable": "TRANSITION_snapshotReady",
										"value": "false"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 195468205352286,
									"parameters": {
										"variable": "TRANSITION_squaresLoaded",
										"value": "0"
									}
								},
								{
									"type": "comment",
									"text": "Take snapshot of current frame"
								},
								{
									"id": "snapshot-canvas",
									"objectClass": "System",
									"sid": 831122490899637,
									"parameters": {
										"format": "png",
										"jpeg-quality": "0",
										"x": "0",
										"y": "0",
										"width": "0",
										"height": "0"
									}
								}
							],
							"sid": 970279391503934,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 500549008742932,
											"parameters": {
												"name": "\"width\"",
												"start-index": "0",
												"end-index": "TRANSITION_squareAmountX-1"
											}
										}
									],
									"actions": [],
									"sid": 998987020069115,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 380066934394231,
													"parameters": {
														"name": "\"height\"",
														"start-index": "0",
														"end-index": "TRANSITION_squareAmountY-1"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 988873856281884,
													"parameters": {
														"object-to-create": "TransitionSquare",
														"layer": "\"Transition\"",
														"x": "loopindex(\"width\")*TRANSITION_squareSize",
														"y": "loopindex(\"height\")*TRANSITION_squareSize",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "push",
													"objectClass": "TransitionSquareList",
													"sid": 896312526402651,
													"parameters": {
														"where": "back",
														"value": "TransitionSquare.UID",
														"axis": "x"
													}
												},
												{
													"id": "set-size",
													"objectClass": "TransitionSquare",
													"sid": 529451085512324,
													"parameters": {
														"width": "TRANSITION_squareSize",
														"height": "TRANSITION_squareSize"
													}
												},
												{
													"type": "comment",
													"text": "Terrible - Set up scales and offsets for snapshot"
												},
												{
													"id": "set-image-scale-x",
													"objectClass": "TransitionSquare",
													"sid": 997692948709502,
													"parameters": {
														"scale-x": "100/(PlatformInfo.CanvasDeviceWidth/ViewportWidth(\"Transition\"))"
													}
												},
												{
													"id": "set-image-scale-y",
													"objectClass": "TransitionSquare",
													"sid": 977749516268942,
													"parameters": {
														"scale-y": "100/(PlatformInfo.CanvasDeviceHeight/ViewportHeight(\"Transition\"))"
													}
												},
												{
													"id": "set-image-offset-x",
													"objectClass": "TransitionSquare",
													"sid": 746747977990692,
													"parameters": {
														"offset-x": "-loopindex(\"width\")*(PlatformInfo.CanvasDeviceWidth/ViewportWidth(\"Transition\"))*TRANSITION_squareSize\n"
													}
												},
												{
													"id": "set-image-offset-y",
													"objectClass": "TransitionSquare",
													"sid": 296428041293200,
													"parameters": {
														"offset-y": "-loopindex(\"height\")*(PlatformInfo.CanvasDeviceHeight/ViewportHeight(\"Transition\"))*TRANSITION_squareSize"
													}
												}
											],
											"sid": 248784332770947,
											"children": [
												{
													"eventType": "comment",
													"text": "All squares are created and ready"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 363986607135924,
															"parameters": {
																"first-value": "TransitionSquare.Count",
																"comparison": 0,
																"second-value": "TRANSITION_squareAmountX*TRANSITION_squareAmountY"
															}
														}
													],
													"actions": [
														{
															"id": "shuffle",
															"objectClass": "TransitionSquareList",
															"sid": 485508096421154,
															"parameters": {
																"axis": "x"
															}
														},
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 209794590137673,
															"parameters": {
																"variable": "TRANSITION_squaresReady",
																"value": "true"
															}
														}
													],
													"sid": 300672378702979
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Global - Transitions (Image Loading)",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "comment",
									"text": "Snapshot is ready"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-canvas-snapshot",
											"objectClass": "System",
											"sid": 281966298787691
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 267002736530621,
											"parameters": {
												"variable": "TRANSITION_snapshotReady",
												"value": "true"
											}
										}
									],
									"sid": 493928470016582
								},
								{
									"eventType": "comment",
									"text": "Lines are ready and snapshot is taken, ready to move on"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 135477830791949,
											"parameters": {
												"variable": "TRANSITION_squaresReady"
											}
										},
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 838671906702418,
											"parameters": {
												"variable": "TRANSITION_snapshotReady"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 625482575438195,
											"parameters": {
												"variable": "TRANSITION_squaresReady",
												"value": "false"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 111106703925344,
											"parameters": {
												"variable": "TRANSITION_snapshotReady",
												"value": "false"
											}
										},
										{
											"type": "comment",
											"text": "Apply snapshot image to squares"
										},
										{
											"id": "load-image-from-url",
											"objectClass": "TransitionSquare",
											"sid": 286987264757595,
											"parameters": {
												"uri": "CanvasSnapshot",
												"cross-origin": "anonymous"
											}
										}
									],
									"sid": 266121399199693
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-image-url-loaded",
											"objectClass": "TransitionSquare",
											"sid": 381856112509436
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 463862929764901,
											"parameters": {
												"variable": "TRANSITION_squaresLoaded",
												"value": "1"
											}
										}
									],
									"sid": 463015861273726
								},
								{
									"eventType": "comment",
									"text": "All lines are ready to move, go to the new layout"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 240837710211247,
											"parameters": {
												"variable": "TRANSITION_squaresLoaded",
												"comparison": 4,
												"value": "0"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 167265590870200,
											"parameters": {
												"variable": "TRANSITION_squaresLoaded",
												"comparison": 0,
												"value": "TransitionSquare.Count"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 493508115404962,
											"parameters": {
												"variable": "TRANSITION_squaresLoaded",
												"value": "0"
											}
										},
										{
											"id": "go-to-layout-by-name",
											"objectClass": "System",
											"sid": 389973761210653,
											"parameters": {
												"layout": "TRANSITION_layout"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 174835197406434,
											"parameters": {
												"variable": "TRANSITION_movedLayout",
												"value": "true"
											}
										}
									],
									"sid": 369231360367869,
									"children": [
										{
											"eventType": "comment",
											"text": "Set the start time for each line"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 280184008321174,
													"parameters": {
														"name": "\"i\"",
														"start-index": "0",
														"end-index": "TransitionSquareList.Width-1"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "TransitionSquare",
													"sid": 164856463578671,
													"parameters": {
														"unique-id": "TransitionSquareList.At(loopindex(\"i\"))"
													}
												}
											],
											"actions": [
												{
													"id": "start-timer",
													"objectClass": "TransitionSquare",
													"sid": 774720513866378,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "0.001*loopindex(\"i\")",
														"type": "once",
														"tag": "\"transitionWait\""
													}
												}
											],
											"sid": 419729662348684
										}
									]
								}
							],
							"sid": 123975274482247
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Global - Transitions (Finalizing)",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-timer",
											"objectClass": "TransitionSquare",
											"sid": 937086554162048,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"transitionWait\""
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "TransitionSquare",
											"sid": 496950008259930
										}
									],
									"sid": 563152772072802
								},
								{
									"eventType": "comment",
									"text": "All lines are finished, unlock the game"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 525430346946100,
											"parameters": {
												"variable": "TRANSITION_running"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 499805924925661,
											"parameters": {
												"first-value": "TransitionSquare.Count",
												"comparison": 3,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 790750030533005,
											"parameters": {
												"variable": "TRANSITION_running",
												"value": "false"
											}
										}
									],
									"sid": 363984484603128
								}
							],
							"sid": 413334033436080
						}
					],
					"sid": 402618144576826
				}
			],
			"sid": 125678649172217
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Saving",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Save to local storage"
				},
				{
					"functionName": "save",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-item",
							"objectClass": "LocalStorage",
							"sid": 351796672039084,
							"parameters": {
								"key": "\"saveData1\"",
								"value": "SavedCharacters.AsJSON"
							}
						}
					],
					"sid": 839513501978890
				}
			],
			"sid": 189013203793669
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Loading",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "File read, good to go"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-item-exists",
							"objectClass": "LocalStorage",
							"sid": 200814835939007,
							"parameters": {
								"key": "\"saveData1\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "load",
							"sid": 590713153656908,
							"parameters": [
								"LocalStorage.ItemValue"
							]
						}
					],
					"sid": 779791538256751
				},
				{
					"eventType": "comment",
					"text": "File not read, everything is terrible"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-item-missing",
							"objectClass": "LocalStorage",
							"sid": 797172329625430,
							"parameters": {
								"key": "\"saveData1\""
							}
						},
						{
							"id": "on-error",
							"objectClass": "LocalStorage",
							"sid": 824570187723426
						}
					],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 386802017530525,
							"parameters": {
								"variable": "LOAD_save",
								"value": "true"
							}
						}
					],
					"sid": 185639934971170,
					"isOrBlock": true
				},
				{
					"eventType": "comment",
					"text": "Load from local storage"
				},
				{
					"functionName": "load",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "data",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 947190901180219
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 421307779320199,
							"parameters": {
								"variable": "LOAD_save",
								"value": "true"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 201392012514706,
							"parameters": {
								"type": "log",
								"message": "\"Found save data, loading\""
							}
						},
						{
							"id": "load",
							"objectClass": "SavedCharacters",
							"sid": 873654686859473,
							"parameters": {
								"json": "data"
							}
						}
					],
					"sid": 513821286862037
				}
			],
			"sid": 713090861022777
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Character Rendering",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "createCharacter",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "data",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 715063372738345
						},
						{
							"name": "layer",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 679469320812489
						},
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 642588114322242
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 566747219068032
						},
						{
							"name": "scale",
							"type": "number",
							"initialValue": "1",
							"comment": "",
							"sid": 223414682603978
						},
						{
							"name": "parent",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 703876970441906
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "parse",
							"objectClass": "JSON",
							"sid": 258864811973050,
							"parameters": {
								"data": "data"
							}
						},
						{
							"type": "comment",
							"text": "Create the head as a separate object, for use as a base"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 687125218780377,
							"parameters": {
								"object-to-create": "CharacterHead",
								"layer": "layer",
								"x": "x",
								"y": "y",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "stop-animation",
							"objectClass": "CharacterHead",
							"sid": 110640651536510
						},
						{
							"id": "set-animation-frame",
							"objectClass": "CharacterHead",
							"sid": 995767476003575,
							"parameters": {
								"frame-number": "Functions.getValue(\"head\", \"asset_id\")"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "CharacterHead",
							"sid": 219141233942691,
							"parameters": {
								"scale": "scale"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "CharacterHead",
							"sid": 584799249623038,
							"parameters": {
								"instance-variable": "parent",
								"value": "parent"
							}
						},
						{
							"type": "comment",
							"text": "Calculate the total number of parts expected"
						},
						{
							"type": "script",
							"language": "typescript",
							"script": [
								"const head_object = runtime.objects.CharacterHead.getFirstPickedInstance();",
								"if (!head_object) return;",
								"",
								"const data = JSON.parse(localVars.data);",
								"",
								"var staticCount = Object.keys(data.character_data.static).length;",
								"if (\"head\" in data.character_data.static) staticCount -= 1;",
								"",
								"var movableCount = Object.keys(data.character_data.placeable_movable).length;",
								"if (\"eyes\" in data.character_data.placeable_movable) movableCount += 1;",
								"if (\"eyebrows\" in data.character_data.placeable_movable) movableCount += 1;",
								"",
								"head_object.instVars.totalParts = (staticCount + movableCount);"
							]
						}
					],
					"sid": 376666166151287,
					"children": [
						{
							"eventType": "comment",
							"text": "Iterate through character parts and create them"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "JSON",
									"sid": 596779858863434,
									"parameters": {
										"path": "\"character_data\""
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 146415014220161,
									"parameters": {
										"first-value": "JSON.Path",
										"comparison": 1,
										"second-value": "\"character_data.info\""
									}
								}
							],
							"actions": [],
							"sid": 338516524271327,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "JSON",
											"sid": 703960605960660,
											"parameters": {
												"path": "JSON.Path"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 885521788392315,
											"parameters": {
												"first-value": "JSON.CurrentKey",
												"comparison": 1,
												"second-value": "\"head\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "createCharacterPart",
											"sid": 443610831075317,
											"parameters": [
												"JSON.CurrentKey",
												"CharacterHead.UID",
												"scale",
												false
											]
										}
									],
									"sid": 283109568167367,
									"children": [
										{
											"eventType": "comment",
											"text": "Create a second, mirrored part for eyes and eyebrows"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 664898344917072,
													"parameters": {
														"first-value": "JSON.CurrentKey",
														"comparison": 0,
														"second-value": "\"eyes\""
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 660467286514466,
													"parameters": {
														"first-value": "JSON.CurrentKey",
														"comparison": 0,
														"second-value": "\"eyebrows\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "createCharacterPart",
													"sid": 698716121377109,
													"parameters": [
														"JSON.CurrentKey",
														"CharacterHead.UID",
														"scale",
														true
													]
												}
											],
											"sid": 621978645025216,
											"isOrBlock": true
										}
									]
								}
							]
						}
					]
				},
				{
					"functionName": "createCharacterPart",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "part",
							"type": "string",
							"initialValue": "head",
							"comment": "",
							"sid": 468938354630657
						},
						{
							"name": "id",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 807809198592149
						},
						{
							"name": "scale",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 904925659898665
						},
						{
							"name": "mirrored",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 916699683696727
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "CharacterHead",
							"sid": 229131449145418,
							"parameters": {
								"unique-id": "id"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 182124525410924,
							"parameters": {
								"object-to-create": "CharacterPart",
								"layer": "CharacterHead.LayerName",
								"x": "CharacterHead.ImagePointX(part)",
								"y": "CharacterHead.ImagePointY(part)",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "add-child",
							"objectClass": "CharacterHead",
							"sid": 696749175700863,
							"parameters": {
								"child": "CharacterPart",
								"transform-x": false,
								"transform-y": false,
								"transform-w": false,
								"transform-h": false,
								"transform-a": false,
								"transform-o": false,
								"transform-z-elevation": false,
								"transform-visibility": false,
								"destroy-with-parent": true
							}
						},
						{
							"id": "set-animation",
							"objectClass": "CharacterPart",
							"sid": 185047667464879,
							"parameters": {
								"animation": "part",
								"from": "beginning"
							}
						},
						{
							"id": "stop-animation",
							"objectClass": "CharacterPart",
							"sid": 106710821122245
						},
						{
							"id": "set-animation-frame",
							"objectClass": "CharacterPart",
							"sid": 546633032164667,
							"parameters": {
								"frame-number": "Functions.getValue(part, \"asset_id\")"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "CharacterPart",
							"sid": 408542988307603,
							"parameters": {
								"scale": "(Functions.getValue(part, \"scale\") = 0 ? 1 : Functions.getValue(part, \"scale\")) * scale"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "CharacterPart",
							"sid": 152776851438656,
							"parameters": {
								"angle": "Functions.getValue(part, \"rotation\")"
							}
						},
						{
							"id": "set-position",
							"objectClass": "CharacterPart",
							"sid": 578496613808085,
							"parameters": {
								"x": "Self.X+((Functions.getValue(part, \"offset_x\")*Parts.At(Parts.IndexOf(part), 2))*scale)",
								"y": "Self.Y+((Functions.getValue(part, \"offset_y\")*Parts.At(Parts.IndexOf(part), 3))*scale)"
							}
						}
					],
					"sid": 676305223673531,
					"children": [
						{
							"eventType": "comment",
							"text": "If this part is mirrored, modify certain aspects of it accordingly"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 286695312502532,
									"parameters": {
										"variable": "mirrored"
									}
								}
							],
							"actions": [
								{
									"id": "set-mirrored",
									"objectClass": "CharacterPart",
									"sid": 175037393286136,
									"parameters": {
										"state": "mirrored"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "CharacterPart",
									"sid": 763718248622661,
									"parameters": {
										"angle": "360-Self.Angle"
									}
								},
								{
									"id": "set-x",
									"objectClass": "CharacterPart",
									"sid": 219801602684115,
									"parameters": {
										"x": "CharacterHead.X-(Self.X-CharacterHead.X)"
									}
								}
							],
							"sid": 251786540339612
						},
						{
							"eventType": "comment",
							"text": "Render the created character to a canvas"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-child-count",
									"objectClass": "CharacterHead",
									"sid": 142550399317098,
									"parameters": {
										"which": "own",
										"comparison": 0,
										"count": "Self.totalParts"
									}
								}
							],
							"actions": [
								{
									"id": "create-object",
									"objectClass": "System",
									"sid": 790444676323286,
									"parameters": {
										"object-to-create": "CharacterCanvas",
										"layer": "CharacterHead.LayerName",
										"x": "CharacterHead.X",
										"y": "CharacterHead.Y",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								},
								{
									"id": "set-size",
									"objectClass": "CharacterCanvas",
									"sid": 753887314462480,
									"parameters": {
										"width": "200*scale",
										"height": "200*scale"
									}
								}
							],
							"sid": 734800391227679,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "CharacterHead",
											"sid": 954316358776142,
											"parameters": {
												"instance-variable": "parent",
												"comparison": 4,
												"value": "0"
											}
										},
										{
											"id": "pick-by-unique-id",
											"objectClass": "Card",
											"sid": 722124470381205,
											"parameters": {
												"unique-id": "CharacterHead.parent"
											}
										}
									],
									"actions": [
										{
											"id": "add-child",
											"objectClass": "Card",
											"sid": 761132047748120,
											"parameters": {
												"child": "CharacterCanvas",
												"transform-x": true,
												"transform-y": true,
												"transform-w": true,
												"transform-h": true,
												"transform-a": true,
												"transform-o": true,
												"transform-z-elevation": true,
												"transform-visibility": true,
												"destroy-with-parent": true
											}
										}
									],
									"sid": 172300034808656
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-children",
											"objectClass": "CharacterHead",
											"sid": 696494833318664,
											"parameters": {
												"child": "Character",
												"which": "own"
											}
										}
									],
									"actions": [
										{
											"id": "paste-object",
											"objectClass": "CharacterCanvas",
											"sid": 903321216993766,
											"parameters": {
												"object": "CharacterHead",
												"effects": "without-effects"
											}
										},
										{
											"id": "paste-object",
											"objectClass": "CharacterCanvas",
											"sid": 256430490519041,
											"parameters": {
												"object": "Character",
												"effects": "without-effects"
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 676273076734030
										},
										{
											"id": "destroy",
											"objectClass": "CharacterHead",
											"sid": 844495436424535
										}
									],
									"sid": 899663690830825
								}
							]
						}
					]
				}
			],
			"sid": 144180611067032
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Card Rendering",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "createCard",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "data",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 709402755381446
						},
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 998943190076952
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 331937214651639
						},
						{
							"name": "layer",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 344062662415152
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "parse",
							"objectClass": "JSON",
							"sid": 194904381338007,
							"parameters": {
								"data": "data"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 680076447994066,
							"parameters": {
								"object-to-create": "Card",
								"layer": "layer",
								"x": "x",
								"y": "y",
								"create-hierarchy": true,
								"template-name": "\"\""
							}
						},
						{
							"callFunction": "createCharacter",
							"sid": 621060572888635,
							"parameters": [
								"data",
								"layer",
								"Card.ImagePointX(1)",
								"Card.ImagePointY(1)",
								"0.5",
								"Card.UID"
							]
						}
					],
					"sid": 230589321546343,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 942628611666191,
									"parameters": {
										"object": "Text"
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"language": "typescript",
									"script": [
										"const text_object = runtime.objects.Text.getFirstPickedInstance();",
										"if (!text_object) return;",
										"",
										"const text_type = text_object.instVars.type;",
										"",
										"const json_object = runtime.objects.JSON.getFirstInstance();",
										"if (!json_object) return;",
										"",
										"const getCardText = (): string => {",
										"  switch (text_type) {",
										"    case \"cardName\":",
										"      return getJSONValue(json_object, \"character_data.info.name\");",
										"    case \"cardBirth\":",
										"      return formatDateForDisplay(getJSONValue(json_object, \"character_data.info.date_of_birth\"));",
										"    case \"cardSex\":",
										"      // sex abbreviation",
										"      const sex = getJSONValue(json_object, \"character_data.info.sex\");",
										"      return sexes[sex as keyof typeof sexes]?.abbr ?? \"\";",
										"    case \"cardHair\":",
										"      // hair color abbreviation",
										"      const hairColor = getJSONValue(",
										"        json_object,",
										"        \"character_data.info.hair_color\",",
										"      );",
										"      return hair_colors[hairColor as keyof typeof hair_colors]?.abbr ?? \"\";",
										"    case \"cardEyes\":",
										"      // eye color abbreviation",
										"      const eyeColor = getJSONValue(",
										"        json_object,",
										"        \"character_data.info.eye_color\",",
										"      );",
										"      return eye_colors[eyeColor as keyof typeof eye_colors]?.abbr ?? \"\";",
										"    case \"cardHeight\":",
										"      // height calculation",
										"      const inches = Number(",
										"        getJSONValue(json_object, \"character_data.info.height_in\"),",
										"      );",
										"      const feet = Math.floor(inches / 12);",
										"      const remainder = String(inches % 12).padStart(2, \"0\");;",
										"      return `${feet}'-${remainder}\"`;",
										"    case \"cardWeight\":",
										"      return (",
										"        getJSONValue(json_object, \"character_data.info.weight_lb\") + \" lb\"",
										"      );",
										"    case \"cardEthnicity\":",
										"      // ethnicity abbreviation",
										"      const ethnicity = getJSONValue(",
										"        json_object,",
										"        \"character_data.info.ethnicity\",",
										"      );",
										"      return ethnicities[ethnicity as keyof typeof ethnicities]?.abbr ?? \"\";",
										"    case \"cardRace\":",
										"      // race abbreviation",
										"      const raceData = json_object.getJsonDataCopy().character_data",
										"        .info.race;",
										"",
										"      if (Array.isArray(raceData)) {",
										"        const raceAbbrs = raceData",
										"          .map((r: string) => races[r as keyof typeof races]?.abbr)",
										"          .filter(Boolean);",
										"        return raceAbbrs.join(\"/\");",
										"      } else {",
										"        return races[raceData as keyof typeof races]?.abbr ?? \"\";",
										"      }",
										"    case \"cardCountry\":",
										"      return getJSONValue(json_object, \"character_data.info.location\");",
										"    default:",
										"      return \"\";",
										"  }",
										"};",
										"",
										"text_object.text = getCardText();"
									]
								}
							],
							"sid": 145237772241172
						}
					]
				}
			],
			"sid": 886199402061733
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Navigation",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "Text",
							"sid": 339089937074020,
							"parameters": {
								"instance-variable": "type",
								"comparison": 0,
								"value": "\"time\""
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "Text",
							"sid": 646792515953049,
							"parameters": {
								"text": "zeropad(Date.GetHours(Date.Now),2)&(Date.GetSeconds(Date.Now)%2 ? \":\" : \"\")&zeropad(Date.GetMinutes(Date.Now),2)"
							}
						}
					],
					"sid": 300027364960475
				},
				{
					"eventType": "comment",
					"text": "TODO: this is a bit of a mess"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 258069252526475,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 0,
								"second-value": "\"Plaza\""
							}
						}
					],
					"actions": [],
					"sid": 913413447335396,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "NavButton",
									"sid": 821489887687942,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"login\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "NavButton",
									"sid": 264353392248132,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"logout\""
									}
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "NavButton",
									"sid": 916441948534243,
									"parameters": {
										"visibility": "visible"
									}
								}
							],
							"sid": 290835926302046,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "NavButton",
									"sid": 865867454297881,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"back\""
									}
								}
							],
							"actions": [
								{
									"id": "set-visible",
									"objectClass": "NavButton",
									"sid": 784786417026433,
									"parameters": {
										"visibility": "invisible"
									}
								}
							],
							"sid": 308397463521112
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 403404277363736
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 332281607279249,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 0,
								"second-value": "\"Creator\""
							}
						}
					],
					"actions": [
						{
							"id": "set-visible",
							"objectClass": "NavButton",
							"sid": 543137643739729,
							"parameters": {
								"visibility": "invisible"
							}
						}
					],
					"sid": 321488826690956,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 193412000824276,
									"parameters": {
										"variable": "CREATOR_menu",
										"comparison": 0,
										"value": "\"parts\""
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 632645015064193,
									"parameters": {
										"variable": "CREATOR_menu",
										"comparison": 0,
										"value": "\"properties\""
									}
								}
							],
							"actions": [],
							"sid": 203575829443271,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "NavButton",
											"sid": 830100686186712,
											"parameters": {
												"instance-variable": "id",
												"comparison": 0,
												"value": "\"back\""
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "NavButton",
											"sid": 666254448361672,
											"parameters": {
												"visibility": "visible"
											}
										}
									],
									"sid": 214231906762994
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 153483361957718
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 838295367507120,
									"parameters": {
										"variable": "CREATOR_menu",
										"comparison": 0,
										"value": "\"card\""
									}
								}
							],
							"actions": [],
							"sid": 457271465748617,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "NavButton",
											"sid": 963828671798385,
											"parameters": {
												"instance-variable": "id",
												"comparison": 0,
												"value": "\"login\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "NavButton",
											"sid": 724141196791496,
											"parameters": {
												"instance-variable": "id",
												"comparison": 0,
												"value": "\"logout\""
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "NavButton",
											"sid": 374010915880743,
											"parameters": {
												"visibility": "visible"
											}
										}
									],
									"sid": 812142841842765,
									"isOrBlock": true
								}
							]
						}
					]
				},
				{
					"eventType": "comment",
					"text": "END TODO"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 343250546589776,
							"parameters": {
								"variable": "TRANSITION_running"
							},
							"isInverted": true
						}
					],
					"actions": [],
					"sid": 182126197835825,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "Mouse",
									"sid": 694470116460880,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked",
										"object-clicked": "NavButton"
									}
								},
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 397530728640317,
									"parameters": {
										"object": "NavButton"
									}
								}
							],
							"actions": [],
							"sid": 799544353783164,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-visible",
											"objectClass": "NavButton",
											"sid": 317491801809731
										}
									],
									"actions": [
										{
											"id": "play",
											"objectClass": "Audio",
											"sid": 920457253326292,
											"parameters": {
												"audio-file": "select",
												"loop": "not-looping",
												"volume": "-20",
												"stereo-pan": "0",
												"tag-optional": "\"\""
											}
										}
									],
									"sid": 660896856864740,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "NavButton",
													"sid": 224502206750986,
													"parameters": {
														"instance-variable": "id",
														"comparison": 0,
														"value": "\"back\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "transition",
													"sid": 974584419947385,
													"parameters": [
														"\"Plaza\""
													]
												}
											],
											"sid": 696417068933588
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "NavButton",
													"sid": 973459338641523,
													"parameters": {
														"instance-variable": "id",
														"comparison": 0,
														"value": "\"login\""
													}
												}
											],
											"actions": [],
											"sid": 957884067347897,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "layer-is-visible",
															"objectClass": "System",
															"sid": 610938304609366,
															"parameters": {
																"layer": "\"Login\""
															},
															"isInverted": true
														}
													],
													"actions": [
														{
															"id": "signal",
															"objectClass": "System",
															"sid": 183553542043410,
															"parameters": {
																"tag": "\"openLogin\""
															}
														}
													],
													"sid": 200496584522139
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "else",
															"objectClass": "System",
															"sid": 170424153838313
														}
													],
													"actions": [
														{
															"id": "signal",
															"objectClass": "System",
															"sid": 240542882748916,
															"parameters": {
																"tag": "\"closeLogin\""
															}
														}
													],
													"sid": 168978331333330
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-instance-variable",
													"objectClass": "NavButton",
													"sid": 716527247216549,
													"parameters": {
														"instance-variable": "id",
														"comparison": 0,
														"value": "\"logout\""
													}
												}
											],
											"actions": [
												{
													"type": "script",
													"language": "typescript",
													"script": [
														"logout();"
													]
												}
											],
											"sid": 687066195603178
										}
									]
								}
							],
							"isOrBlock": true
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 543036942685130,
							"parameters": {
								"tag": "\"openLogin\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "toggleLayer",
							"sid": 461522949378251,
							"parameters": [
								"\"Login\"",
								true,
								true
							]
						},
						{
							"callFunction": "toggleLayer",
							"sid": 607764656991374,
							"parameters": [
								"\"Buttons\"",
								false,
								false
							]
						},
						{
							"callFunction": "toggleLayer",
							"sid": 682370977757963,
							"parameters": [
								"\"Information\"",
								false,
								false
							]
						},
						{
							"type": "script",
							"language": "typescript",
							"script": [
								"document.addEventListener(\"keydown\", preventTab);"
							]
						}
					],
					"sid": 390738985847032
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 669182100103040,
							"parameters": {
								"tag": "\"closeLogin\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "toggleLayer",
							"sid": 542565981885043,
							"parameters": [
								"\"Login\"",
								true,
								false
							]
						},
						{
							"callFunction": "toggleLayer",
							"sid": 480422381802037,
							"parameters": [
								"\"Buttons\"",
								false,
								true
							]
						},
						{
							"callFunction": "toggleLayer",
							"sid": 775874305258457,
							"parameters": [
								"\"Information\"",
								false,
								true
							]
						},
						{
							"type": "script",
							"language": "typescript",
							"script": [
								"document.removeEventListener(\"keydown\", preventTab);"
							]
						}
					],
					"sid": 848138534930410
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Global - Login",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "every-tick",
									"objectClass": "System",
									"sid": 658819449008223
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "LoginButton",
									"sid": 428973791354637,
									"parameters": {
										"animation": "Self.type&\"Default\"",
										"from": "beginning"
									}
								}
							],
							"sid": 330141036937631
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "cursor-is-over-object",
									"objectClass": "Mouse",
									"sid": 252687066823652,
									"parameters": {
										"object": "LoginButton"
									}
								}
							],
							"actions": [
								{
									"id": "set-animation",
									"objectClass": "LoginButton",
									"sid": 835582553171206,
									"parameters": {
										"animation": "Self.type&\"Selected\"",
										"from": "beginning"
									}
								}
							],
							"sid": 475918638177048
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 388401019734137
								},
								{
									"id": "on-signal",
									"objectClass": "System",
									"sid": 898401767597442,
									"parameters": {
										"tag": "\"authStateChange\""
									}
								}
							],
							"actions": [],
							"sid": 284829129017210,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "NavButton",
											"sid": 248334801873698,
											"parameters": {
												"instance-variable": "id",
												"comparison": 0,
												"value": "\"login\""
											}
										},
										{
											"id": "compare-instance-variable",
											"objectClass": "NavButton",
											"sid": 621246337944858,
											"parameters": {
												"instance-variable": "id",
												"comparison": 0,
												"value": "\"logout\""
											}
										}
									],
									"actions": [
										{
											"type": "script",
											"language": "typescript",
											"script": [
												"const button_object = runtime.objects.NavButton.getFirstPickedInstance();",
												"if (!button_object) return;",
												"const text_object = button_object.getChildAt(0) as ISpriteFontInstance;",
												"if (!text_object) return;",
												"",
												"if (await isLoggedIn() === true) {",
												"  runtime.signal(\"closeLogin\");",
												"  button_object.instVars.id = \"logout\";",
												"  text_object.text = \"Log out\";",
												"} else {",
												"  button_object.instVars.id = \"login\";",
												"  text_object.text = \"Log in\";",
												"}"
											]
										}
									],
									"sid": 993290004815000,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "CardButton",
											"sid": 417992449819535,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"upload\""
											}
										}
									],
									"actions": [
										{
											"type": "script",
											"language": "typescript",
											"script": [
												"const button_object = runtime.objects.CardButton.getFirstPickedInstance();",
												"if (!button_object) return;",
												"",
												"if (await isLoggedIn() === true) {",
												"  button_object.opacity = 1;",
												"} else {",
												"  button_object.opacity = 0.5;",
												"}"
											]
										}
									],
									"sid": 950564008548182
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-object-clicked",
									"objectClass": "Mouse",
									"sid": 925795324914412,
									"parameters": {
										"mouse-button": "left",
										"click-type": "clicked",
										"object-clicked": "LoginButton"
									}
								},
								{
									"id": "on-tap-object",
									"objectClass": "Touch",
									"sid": 230878641276472,
									"parameters": {
										"object": "LoginButton"
									}
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 768074702906107,
									"parameters": {
										"audio-file": "select",
										"loop": "not-looping",
										"volume": "-20",
										"stereo-pan": "0",
										"tag-optional": "\"\""
									}
								}
							],
							"sid": 833583300588851,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "LoginButton",
											"sid": 904469049708707,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"google\""
											}
										}
									],
									"actions": [
										{
											"type": "script",
											"language": "typescript",
											"script": [
												"loginWithGoogle();"
											]
										}
									],
									"sid": 936394727205530
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "LoginButton",
											"sid": 895398432764730,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"itch\""
											}
										}
									],
									"actions": [
										{
											"type": "script",
											"language": "typescript",
											"script": [
												"loginWithItch();"
											]
										}
									],
									"sid": 202422837891616
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "LoginButton",
											"sid": 890840695096516,
											"parameters": {
												"instance-variable": "type",
												"comparison": 0,
												"value": "\"newgrounds\""
											}
										},
										{
											"id": "is-ready",
											"objectClass": "NGIO",
											"sid": 946345751774983
										}
									],
									"actions": [
										{
											"id": "login",
											"objectClass": "NGIO",
											"sid": 113839683071423,
											"parameters": {
												"window-mode": "popup"
											}
										}
									],
									"sid": 172017992510594
								}
							],
							"isOrBlock": true
						},
						{
							"eventType": "variable",
							"name": "NGIO_sessionID",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 233241318949843
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-login-success",
									"objectClass": "NGIO",
									"sid": 780101171932276
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 546158843282950,
									"parameters": {
										"variable": "NGIO_sessionID",
										"value": "NGIO.SessionID"
									}
								},
								{
									"type": "script",
									"language": "typescript",
									"script": [
										"const session_id = localVars.NGIO_sessionID as string;",
										"authenticateNewgrounds(session_id);"
									]
								}
							],
							"sid": 413859172867213
						}
					],
					"sid": 810685346559133
				}
			],
			"sid": 878848367292974
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Music",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Intro"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 143581623933222
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 642581256239426,
							"parameters": {
								"first-value": "LayoutName",
								"comparison": 1,
								"second-value": "\"Loader\""
							}
						},
						{
							"id": "is-tag-playing",
							"objectClass": "Audio",
							"sid": 453040255559080,
							"parameters": {
								"tag": "\"music\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 327556902549819,
							"parameters": {
								"tag": "\"playMusicIntro\""
							}
						}
					],
					"sid": 290668956681584
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 458221582253925,
							"parameters": {
								"tag": "\"playMusicIntro\""
							}
						}
					],
					"actions": [
						{
							"id": "stop",
							"objectClass": "Audio",
							"sid": 478391860215494,
							"parameters": {
								"tag": "\"music\""
							}
						},
						{
							"id": "remove-all-effects",
							"objectClass": "Audio",
							"sid": 414539130389288,
							"parameters": {
								"tag": "\"music\""
							}
						}
					],
					"sid": 126230298302416,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 611776736925312,
									"parameters": {
										"variable": "GAME_online"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 977381302881893,
									"parameters": {
										"audio-file": "offlineIntro",
										"loop": "not-looping",
										"volume": "-20",
										"stereo-pan": "0",
										"tag-optional": "\"music intro\""
									}
								}
							],
							"sid": 585182962354008
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 849090611709303
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 399375489424018,
									"parameters": {
										"audio-file": "onlineIntro",
										"loop": "not-looping",
										"volume": "-20",
										"stereo-pan": "0",
										"tag-optional": "\"music intro\""
									}
								}
							],
							"sid": 764553780189486
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Loop"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-ended",
							"objectClass": "Audio",
							"sid": 969784578763948,
							"parameters": {
								"tag": "\"intro\""
							}
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 380383771092328,
							"parameters": {
								"tag": "\"playMusicLoop\""
							}
						}
					],
					"sid": 219484741970544
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 683492846994165,
							"parameters": {
								"tag": "\"playMusicLoop\""
							}
						}
					],
					"actions": [],
					"sid": 905784459930105,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 687936744290488,
									"parameters": {
										"variable": "GAME_online"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 548449371194278,
									"parameters": {
										"audio-file": "offlineLoop",
										"loop": "looping",
										"volume": "-20",
										"stereo-pan": "0",
										"tag-optional": "\"music loop\""
									}
								}
							],
							"sid": 315586411669331
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 438489672302454
								}
							],
							"actions": [
								{
									"id": "play",
									"objectClass": "Audio",
									"sid": 486836477152019,
									"parameters": {
										"audio-file": "onlineLoop",
										"loop": "looping",
										"volume": "-20",
										"stereo-pan": "0",
										"tag-optional": "\"music loop\""
									}
								}
							],
							"sid": 409552776239315
						}
					]
				},
				{
					"eventType": "comment",
					"text": "Swap"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-signal",
							"objectClass": "System",
							"sid": 733663557936278,
							"parameters": {
								"tag": "\"swapMusic\""
							}
						},
						{
							"id": "is-timer-running",
							"objectClass": "NavBar",
							"sid": 213682034753622,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"musicFade\""
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "start-timer",
							"objectClass": "NavBar",
							"sid": 535156411729377,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "1.0",
								"type": "once",
								"tag": "\"musicFade\""
							}
						},
						{
							"id": "add-filter-effect",
							"objectClass": "Audio",
							"sid": 366502514055013,
							"parameters": {
								"tag": "\"music\"",
								"type": "low-pass",
								"frequency": "100",
								"detune": "0",
								"q": "1",
								"gain": "0",
								"mix": "0"
							}
						},
						{
							"id": "set-effect-parameter",
							"objectClass": "Audio",
							"sid": 376180307573329,
							"parameters": {
								"tag": "\"music\"",
								"index": "0",
								"parameter": "mix",
								"value": "100",
								"ramp": "linear",
								"time": "1"
							}
						},
						{
							"id": "fade-volume",
							"objectClass": "Audio",
							"sid": 767315350423363,
							"parameters": {
								"tag": "\"music\"",
								"db": "-100",
								"duration": "1",
								"ending": "stop"
							}
						}
					],
					"sid": 787918680898722
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "NavBar",
							"sid": 239379933228753,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"musicFade\""
							}
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 854285911627426,
							"parameters": {
								"tag": "\"playMusicIntro\""
							}
						}
					],
					"sid": 451747323516060
				}
			],
			"sid": 200835656243407
		}
	],
	"sid": 778792192564054
}