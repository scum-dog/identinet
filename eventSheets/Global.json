{
	"name": "Global",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Server"
		},
		{
			"eventType": "comment",
			"text": "Game type flags"
		},
		{
			"eventType": "variable",
			"name": "GAME_mobile",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the game being played with touch controls?",
			"isStatic": false,
			"isConstant": false,
			"sid": 407265585322280
		},
		{
			"eventType": "variable",
			"name": "GAME_standalone",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is the game a standalone version?",
			"isStatic": false,
			"isConstant": false,
			"sid": 554719297062832
		},
		{
			"eventType": "comment",
			"text": "Settings"
		},
		{
			"eventType": "variable",
			"name": "SETTING_fullscreen",
			"type": "number",
			"initialValue": "0",
			"comment": "Fullscreen status; dynamically changed",
			"isStatic": false,
			"isConstant": false,
			"sid": 179305125864221
		},
		{
			"eventType": "comment",
			"text": "Global transition flags"
		},
		{
			"eventType": "variable",
			"name": "TRANSITION_running",
			"type": "boolean",
			"initialValue": "false",
			"comment": "Is a transition running?",
			"isStatic": false,
			"isConstant": false,
			"sid": 990990060792822
		},
		{
			"eventType": "variable",
			"name": "TRANSITION_movedLayout",
			"type": "boolean",
			"initialValue": "true",
			"comment": "Has the transition moved layouts?",
			"isStatic": false,
			"isConstant": false,
			"sid": 607851642029713
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Core Logic",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "comment",
					"text": "Input signals, for menus and such"
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-key-pressed",
							"objectClass": "Keyboard",
							"sid": 727191375239650
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 996870111812566,
							"parameters": {
								"tag": "\"inputKeyboard\""
							}
						}
					],
					"sid": 502866726537902
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-click",
							"objectClass": "Mouse",
							"sid": 437172700693341
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 777287560701650,
							"parameters": {
								"tag": "\"inputMouse\""
							}
						}
					],
					"sid": 134940548235051,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-in-touch",
							"objectClass": "Touch",
							"sid": 523426427525745
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 813835561099967,
							"parameters": {
								"tag": "\"inputTouch\""
							}
						}
					],
					"sid": 666154280898187,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-button-pressed",
							"objectClass": "Gamepad",
							"sid": 345377304997760,
							"parameters": {
								"gamepad": "0"
							}
						},
						{
							"id": "compare-axis",
							"objectClass": "Gamepad",
							"sid": 288255676579172,
							"parameters": {
								"gamepad": "0",
								"axis": "left-analog-x-axis",
								"comparison": 1,
								"value": "0"
							}
						},
						{
							"id": "compare-axis",
							"objectClass": "Gamepad",
							"sid": 234036461372792,
							"parameters": {
								"gamepad": "0",
								"axis": "left-analog-y-axis",
								"comparison": 1,
								"value": "0"
							}
						},
						{
							"id": "compare-axis",
							"objectClass": "Gamepad",
							"sid": 127610234071055,
							"parameters": {
								"gamepad": "0",
								"axis": "right-analog-x-axis",
								"comparison": 1,
								"value": "0"
							}
						},
						{
							"id": "compare-axis",
							"objectClass": "Gamepad",
							"sid": 906433205917106,
							"parameters": {
								"gamepad": "0",
								"axis": "right-analog-y-axis",
								"comparison": 1,
								"value": "0"
							}
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 859654476697312,
							"parameters": {
								"tag": "\"inputGamepad\""
							}
						}
					],
					"sid": 422176127192514,
					"isOrBlock": true
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-key-released",
							"objectClass": "Keyboard",
							"sid": 434821225144844
						},
						{
							"id": "on-movement",
							"objectClass": "Mouse",
							"sid": 827058721706502
						},
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 919252453008920,
							"parameters": {
								"direction": "any"
							}
						},
						{
							"id": "on-any-button-released",
							"objectClass": "Gamepad",
							"sid": 278062757147981,
							"parameters": {
								"gamepad": "0"
							}
						}
					],
					"actions": [
						{
							"id": "signal",
							"objectClass": "System",
							"sid": 722407230240405,
							"parameters": {
								"tag": "\"inputMixed\""
							}
						}
					],
					"sid": 442189682028448,
					"isOrBlock": true
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Global - Fullscreen",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"eventType": "comment",
							"text": "Global fullscreen logic"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 155821520712423,
									"parameters": {
										"key": 70
									}
								}
							],
							"actions": [],
							"sid": 738691964537577,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-fullscreen",
											"objectClass": "Browser",
											"sid": 781063148920599,
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "request-fullscreen",
											"objectClass": "Browser",
											"sid": 286100259290533,
											"parameters": {
												"mode": "stretch-letterbox-scale",
												"navigation-ui": "hide"
											}
										}
									],
									"sid": 534736673127166
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-pointer-lock",
											"objectClass": "Mouse",
											"sid": 415699415818024
										}
									],
									"actions": [
										{
											"id": "request-pointer-lock",
											"objectClass": "Mouse",
											"sid": 553984261761215,
											"parameters": {
												"unadjusted-movement": false
											}
										}
									],
									"sid": 809430725792374
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-key-pressed",
									"objectClass": "Keyboard",
									"sid": 268451051059547,
									"parameters": {
										"key": 27
									}
								}
							],
							"actions": [],
							"sid": 466272135959637,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-fullscreen",
											"objectClass": "Browser",
											"sid": 647511298494421
										}
									],
									"actions": [
										{
											"id": "cancel-fullscreen",
											"objectClass": "Browser",
											"sid": 333662706842389
										}
									],
									"sid": 934843066124839
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "has-pointer-lock",
											"objectClass": "Mouse",
											"sid": 254183900445408
										}
									],
									"actions": [
										{
											"id": "request-pointer-lock",
											"objectClass": "Mouse",
											"sid": 858146093385978,
											"parameters": {
												"unadjusted-movement": false
											}
										}
									],
									"sid": 392443654052895
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Fullscreen status has changed"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-fullscreen",
									"objectClass": "Browser",
									"sid": 927137681348916
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 671694128739538,
									"parameters": {
										"variable": "SETTING_fullscreen",
										"value": "1"
									}
								}
							],
							"sid": 832848798733814,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 643253179806765
										}
									],
									"actions": [
										{
											"id": "signal",
											"objectClass": "System",
											"sid": 416826441927277,
											"parameters": {
												"tag": "\"refreshToggles\""
											}
										}
									],
									"sid": 485236235179779
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 226153426644858
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 422914758752218,
									"parameters": {
										"variable": "SETTING_fullscreen",
										"value": "0"
									}
								}
							],
							"sid": 678025845406038,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "trigger-once-while-true",
											"objectClass": "System",
											"sid": 332937020591583
										}
									],
									"actions": [
										{
											"id": "signal",
											"objectClass": "System",
											"sid": 134236314217683,
											"parameters": {
												"tag": "\"refreshToggles\""
											}
										}
									],
									"sid": 982178288415076
								}
							]
						}
					],
					"sid": 848170105583906
				}
			],
			"sid": 105681604197051
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Transitions",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "TRANSITION_layout",
					"type": "string",
					"initialValue": "Plaza",
					"comment": "Layout to move to during transition",
					"isStatic": true,
					"isConstant": false,
					"sid": 130197556402275
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squareSize",
					"type": "number",
					"initialValue": "10",
					"comment": "Square size, defined here",
					"isStatic": true,
					"isConstant": true,
					"sid": 116895204679513
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squareAmountX",
					"type": "number",
					"initialValue": "0",
					"comment": "Amount of squares to create on the X axis, determined at runtime",
					"isStatic": true,
					"isConstant": false,
					"sid": 419704741782169
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squareAmountY",
					"type": "number",
					"initialValue": "0",
					"comment": "Amount of squares to create on the Y axis, determined at runtime",
					"isStatic": true,
					"isConstant": false,
					"sid": 564387598816413
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squaresReady",
					"type": "boolean",
					"initialValue": "false",
					"comment": "Are all squares ready?",
					"isStatic": true,
					"isConstant": false,
					"sid": 553566298581460
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_snapshotReady",
					"type": "boolean",
					"initialValue": "false",
					"comment": "Is the snapshot ready?",
					"isStatic": true,
					"isConstant": false,
					"sid": 757773616769131
				},
				{
					"eventType": "variable",
					"name": "TRANSITION_squaresLoaded",
					"type": "number",
					"initialValue": "0",
					"comment": "Amount of squares with snapshot image loaded",
					"isStatic": true,
					"isConstant": false,
					"sid": 585053844716741
				},
				{
					"eventType": "group",
					"disabled": false,
					"title": "Global - Transitions (Initialization)",
					"description": "",
					"isActiveOnStart": true,
					"children": [
						{
							"functionName": "transition",
							"functionDescription": "Pixelate transition effect between two layouts",
							"functionCategory": "",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "layout",
									"type": "string",
									"initialValue": "Level",
									"comment": "",
									"sid": 372225208034038
								}
							],
							"eventType": "function-block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 611281440882290,
									"parameters": {
										"variable": "TRANSITION_running"
									},
									"isInverted": true
								}
							],
							"actions": [
								{
									"id": "set-size",
									"objectClass": "TransitionPixelateArr",
									"sid": 574419307005699,
									"parameters": {
										"width": "1",
										"height": "1",
										"depth": "1"
									}
								},
								{
									"id": "clear",
									"objectClass": "TransitionPixelateArr",
									"sid": 165310334802459,
									"parameters": {
										"value": "0"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 927396777200273,
									"parameters": {
										"variable": "TRANSITION_running",
										"value": "true"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 101237970749030,
									"parameters": {
										"variable": "TRANSITION_movedLayout",
										"value": "false"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 601707983777940,
									"parameters": {
										"variable": "TRANSITION_layout",
										"value": "layout"
									}
								},
								{
									"id": "set-cursor-style2",
									"objectClass": "Mouse",
									"sid": 408103702938976,
									"parameters": {
										"cursor-style": "normal"
									}
								},
								{
									"type": "comment",
									"text": "Initialization"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 590385969546263,
									"parameters": {
										"variable": "TRANSITION_squareAmountX",
										"value": "ceil(ViewportWidth(\"Transition\")/TRANSITION_squareSize)"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 674157351106468,
									"parameters": {
										"variable": "TRANSITION_squareAmountY",
										"value": "ceil(ViewportHeight(\"Transition\")/TRANSITION_squareSize)"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 194403266251229,
									"parameters": {
										"variable": "TRANSITION_squaresReady",
										"value": "false"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 708034889731857,
									"parameters": {
										"variable": "TRANSITION_snapshotReady",
										"value": "false"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 195468205352286,
									"parameters": {
										"variable": "TRANSITION_squaresLoaded",
										"value": "0"
									}
								},
								{
									"type": "comment",
									"text": "Take snapshot of current frame"
								},
								{
									"id": "snapshot-canvas",
									"objectClass": "System",
									"sid": 831122490899637,
									"parameters": {
										"format": "png",
										"jpeg-quality": "0",
										"x": "0",
										"y": "0",
										"width": "0",
										"height": "0"
									}
								}
							],
							"sid": 970279391503934,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for",
											"objectClass": "System",
											"sid": 500549008742932,
											"parameters": {
												"name": "\"width\"",
												"start-index": "0",
												"end-index": "TRANSITION_squareAmountX-1"
											}
										}
									],
									"actions": [],
									"sid": 998987020069115,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 380066934394231,
													"parameters": {
														"name": "\"height\"",
														"start-index": "0",
														"end-index": "TRANSITION_squareAmountY-1"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 988873856281884,
													"parameters": {
														"object-to-create": "TransitionSquare",
														"layer": "\"Transition\"",
														"x": "loopindex(\"width\")*TRANSITION_squareSize",
														"y": "loopindex(\"height\")*TRANSITION_squareSize",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "push",
													"objectClass": "TransitionPixelateArr",
													"sid": 896312526402651,
													"parameters": {
														"where": "back",
														"value": "TransitionSquare.UID",
														"axis": "x"
													}
												},
												{
													"id": "set-size",
													"objectClass": "TransitionSquare",
													"sid": 529451085512324,
													"parameters": {
														"width": "TRANSITION_squareSize",
														"height": "TRANSITION_squareSize"
													}
												},
												{
													"type": "comment",
													"text": "Terrible - Set up scales and offsets for snapshot"
												},
												{
													"id": "set-image-scale-x",
													"objectClass": "TransitionSquare",
													"sid": 997692948709502,
													"parameters": {
														"scale-x": "100/(PlatformInfo.CanvasDeviceWidth/ViewportWidth(\"Transition\"))"
													}
												},
												{
													"id": "set-image-scale-y",
													"objectClass": "TransitionSquare",
													"sid": 977749516268942,
													"parameters": {
														"scale-y": "100/(PlatformInfo.CanvasDeviceHeight/ViewportHeight(\"Transition\"))"
													}
												},
												{
													"id": "set-image-offset-x",
													"objectClass": "TransitionSquare",
													"sid": 746747977990692,
													"parameters": {
														"offset-x": "-loopindex(\"width\")*(PlatformInfo.CanvasDeviceWidth/ViewportWidth(\"Transition\"))*TRANSITION_squareSize\n"
													}
												},
												{
													"id": "set-image-offset-y",
													"objectClass": "TransitionSquare",
													"sid": 296428041293200,
													"parameters": {
														"offset-y": "-loopindex(\"height\")*(PlatformInfo.CanvasDeviceHeight/ViewportHeight(\"Transition\"))*TRANSITION_squareSize"
													}
												}
											],
											"sid": 248784332770947,
											"children": [
												{
													"eventType": "comment",
													"text": "All squares are created and ready"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 363986607135924,
															"parameters": {
																"first-value": "TransitionSquare.Count",
																"comparison": 0,
																"second-value": "TRANSITION_squareAmountX*TRANSITION_squareAmountY"
															}
														}
													],
													"actions": [
														{
															"id": "shuffle",
															"objectClass": "TransitionPixelateArr",
															"sid": 485508096421154,
															"parameters": {
																"axis": "x"
															}
														},
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 209794590137673,
															"parameters": {
																"variable": "TRANSITION_squaresReady",
																"value": "true"
															}
														}
													],
													"sid": 300672378702979
												}
											]
										}
									]
								}
							]
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Global - Transitions (Image Loading)",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "comment",
									"text": "Snapshot is ready"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-canvas-snapshot",
											"objectClass": "System",
											"sid": 281966298787691
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 267002736530621,
											"parameters": {
												"variable": "TRANSITION_snapshotReady",
												"value": "true"
											}
										}
									],
									"sid": 493928470016582
								},
								{
									"eventType": "comment",
									"text": "Lines are ready and snapshot is taken, ready to move on"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 135477830791949,
											"parameters": {
												"variable": "TRANSITION_squaresReady"
											}
										},
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 838671906702418,
											"parameters": {
												"variable": "TRANSITION_snapshotReady"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 625482575438195,
											"parameters": {
												"variable": "TRANSITION_squaresReady",
												"value": "false"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 111106703925344,
											"parameters": {
												"variable": "TRANSITION_snapshotReady",
												"value": "false"
											}
										},
										{
											"type": "comment",
											"text": "Apply snapshot image to squares"
										},
										{
											"id": "load-image-from-url",
											"objectClass": "TransitionSquare",
											"sid": 286987264757595,
											"parameters": {
												"uri": "CanvasSnapshot",
												"cross-origin": "anonymous"
											}
										}
									],
									"sid": 266121399199693
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-image-url-loaded",
											"objectClass": "TransitionSquare",
											"sid": 381856112509436
										}
									],
									"actions": [
										{
											"id": "add-to-eventvar",
											"objectClass": "System",
											"sid": 463862929764901,
											"parameters": {
												"variable": "TRANSITION_squaresLoaded",
												"value": "1"
											}
										}
									],
									"sid": 463015861273726
								},
								{
									"eventType": "comment",
									"text": "All lines are ready to move, go to the new layout"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 240837710211247,
											"parameters": {
												"variable": "TRANSITION_squaresLoaded",
												"comparison": 4,
												"value": "0"
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 167265590870200,
											"parameters": {
												"variable": "TRANSITION_squaresLoaded",
												"comparison": 0,
												"value": "TransitionSquare.Count"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 493508115404962,
											"parameters": {
												"variable": "TRANSITION_squaresLoaded",
												"value": "0"
											}
										},
										{
											"id": "go-to-layout-by-name",
											"objectClass": "System",
											"sid": 389973761210653,
											"parameters": {
												"layout": "TRANSITION_layout"
											}
										},
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 174835197406434,
											"parameters": {
												"variable": "TRANSITION_movedLayout",
												"value": "true"
											}
										}
									],
									"sid": 369231360367869,
									"children": [
										{
											"eventType": "comment",
											"text": "Set the start time for each line"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for",
													"objectClass": "System",
													"sid": 280184008321174,
													"parameters": {
														"name": "\"i\"",
														"start-index": "0",
														"end-index": "TransitionPixelateArr.Width-1"
													}
												},
												{
													"id": "pick-by-unique-id",
													"objectClass": "TransitionSquare",
													"sid": 164856463578671,
													"parameters": {
														"unique-id": "TransitionPixelateArr.At(loopindex(\"i\"))"
													}
												}
											],
											"actions": [
												{
													"id": "start-timer",
													"objectClass": "TransitionSquare",
													"sid": 637127220699581,
													"behaviorType": "Timer",
													"parameters": {
														"duration": "dt*0.05*loopindex(\"i\")",
														"type": "once",
														"tag": "\"transitionWait\""
													}
												},
												{
													"id": "log",
													"objectClass": "Browser",
													"sid": 637489199156969,
													"parameters": {
														"type": "log",
														"message": "\"delete\""
													}
												}
											],
											"sid": 419729662348684
										}
									]
								}
							],
							"sid": 123975274482247
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Global - Transitions (Finalizing)",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-timer",
											"objectClass": "TransitionSquare",
											"sid": 937086554162048,
											"behaviorType": "Timer",
											"parameters": {
												"tag": "\"transitionWait\""
											}
										}
									],
									"actions": [
										{
											"id": "destroy",
											"objectClass": "TransitionSquare",
											"sid": 496950008259930
										}
									],
									"sid": 563152772072802
								},
								{
									"eventType": "comment",
									"text": "All lines are finished, unlock the game"
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 525430346946100,
											"parameters": {
												"variable": "TRANSITION_running"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 499805924925661,
											"parameters": {
												"first-value": "TransitionSquare.Count",
												"comparison": 3,
												"second-value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-boolean-eventvar",
											"objectClass": "System",
											"sid": 790750030533005,
											"parameters": {
												"variable": "TRANSITION_running",
												"value": "false"
											}
										}
									],
									"sid": 363984484603128
								}
							],
							"sid": 413334033436080
						}
					],
					"sid": 402618144576826
				}
			],
			"sid": 125678649172217
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Global - Character Rendering",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"functionName": "createCharacter",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "data",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 715063372738345
						},
						{
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 642588114322242
						},
						{
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 566747219068032
						},
						{
							"name": "scale",
							"type": "number",
							"initialValue": "1",
							"comment": "",
							"sid": 223414682603978
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "parse",
							"objectClass": "JSON",
							"sid": 417030151869635,
							"parameters": {
								"data": "data"
							}
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 459819244694242,
							"parameters": {
								"object-to-create": "DrawingCanvas",
								"layer": "\"Character\"",
								"x": "-100",
								"y": "-100",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"type": "comment",
							"text": "Create the head as a separate object, for use as a base"
						},
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 170537780844335,
							"parameters": {
								"object-to-create": "CharacterHead",
								"layer": "\"Character\"",
								"x": "-100",
								"y": "-100",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "stop-animation",
							"objectClass": "CharacterHead",
							"sid": 759681670879772
						},
						{
							"id": "set-animation-frame",
							"objectClass": "CharacterHead",
							"sid": 189122213028469,
							"parameters": {
								"frame-number": "JSON.Get(\"character_data.static.head.asset_id\")"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "CharacterHead",
							"sid": 891294344040833,
							"parameters": {
								"scale": "scale"
							}
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 164717800919316
						}
					],
					"sid": 966193678938643,
					"children": [
						{
							"eventType": "comment",
							"text": "Iterate through character parts and create them"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "JSON",
									"sid": 423665316548200,
									"parameters": {
										"path": "\"character_data\""
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 526404320474343,
									"parameters": {
										"first-value": "JSON.Path",
										"comparison": 1,
										"second-value": "\"character_data.info\""
									}
								}
							],
							"actions": [],
							"sid": 836597036949490,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "JSON",
											"sid": 114343034100314,
											"parameters": {
												"path": "JSON.Path"
											}
										},
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 439190423255852,
											"parameters": {
												"first-value": "JSON.CurrentKey",
												"comparison": 1,
												"second-value": "\"head\""
											}
										}
									],
									"actions": [
										{
											"callFunction": "createCharacterPart",
											"sid": 526747923447601,
											"parameters": [
												"JSON.Path",
												"JSON.CurrentKey",
												"CharacterHead.UID",
												"scale",
												false
											]
										}
									],
									"sid": 685485503349728,
									"children": [
										{
											"eventType": "comment",
											"text": "Create a second, mirrored part for eyes and eyebrows"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 430375854223968,
													"parameters": {
														"first-value": "JSON.CurrentKey",
														"comparison": 0,
														"second-value": "\"eyes\""
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 188361403114366,
													"parameters": {
														"first-value": "JSON.CurrentKey",
														"comparison": 0,
														"second-value": "\"eyebrows\""
													}
												}
											],
											"actions": [
												{
													"callFunction": "createCharacterPart",
													"sid": 101642636351080,
													"parameters": [
														"JSON.Path",
														"JSON.CurrentKey",
														"CharacterHead.UID",
														"scale",
														true
													]
												}
											],
											"sid": 114748455462276,
											"isOrBlock": true
										}
									]
								}
							]
						},
						{
							"eventType": "comment",
							"text": "Render the created character to a canvas"
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 979375315211866
								},
								{
									"id": "set-size",
									"objectClass": "DrawingCanvas",
									"sid": 843035547301499,
									"parameters": {
										"width": "200*scale",
										"height": "200*scale"
									}
								},
								{
									"id": "paste-object",
									"objectClass": "DrawingCanvas",
									"sid": 899876580873102,
									"parameters": {
										"object": "Character",
										"effects": "without-effects"
									}
								},
								{
									"id": "wait-for-previous-actions",
									"objectClass": "System",
									"sid": 278803787937293
								},
								{
									"id": "destroy",
									"objectClass": "Character",
									"sid": 984787237900687
								},
								{
									"id": "set-position",
									"objectClass": "DrawingCanvas",
									"sid": 646534830624536,
									"parameters": {
										"x": "x",
										"y": "y"
									}
								}
							],
							"sid": 923943902055360
						}
					]
				},
				{
					"functionName": "createCharacterPart",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": true,
					"functionParameters": [
						{
							"name": "path",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 221965785347236
						},
						{
							"name": "name",
							"type": "string",
							"initialValue": "head",
							"comment": "",
							"sid": 468938354630657
						},
						{
							"name": "id",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 807809198592149
						},
						{
							"name": "scale",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 904925659898665
						},
						{
							"name": "mirrored",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 916699683696727
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "CharacterHead",
							"sid": 846533911405620,
							"parameters": {
								"unique-id": "id"
							}
						}
					],
					"actions": [
						{
							"id": "create-object",
							"objectClass": "System",
							"sid": 566683830900231,
							"parameters": {
								"object-to-create": "CharacterPart",
								"layer": "\"Character\"",
								"x": "CharacterHead.ImagePointX(name)",
								"y": "CharacterHead.ImagePointY(name)",
								"create-hierarchy": false,
								"template-name": "\"\""
							}
						},
						{
							"id": "set-animation",
							"objectClass": "CharacterPart",
							"sid": 769097454682488,
							"parameters": {
								"animation": "name",
								"from": "beginning"
							}
						},
						{
							"id": "stop-animation",
							"objectClass": "CharacterPart",
							"sid": 234629665993541
						},
						{
							"id": "set-animation-frame",
							"objectClass": "CharacterPart",
							"sid": 713407821360288,
							"parameters": {
								"frame-number": "JSON.Get(path&\".asset_id\")"
							}
						},
						{
							"id": "set-scale",
							"objectClass": "CharacterPart",
							"sid": 680980037460570,
							"parameters": {
								"scale": "(JSON.Get(path&\".scale\") = 0 ? 1 : JSON.Get(path&\".scale\")) * scale"
							}
						},
						{
							"id": "set-angle",
							"objectClass": "CharacterPart",
							"sid": 406144653378803,
							"parameters": {
								"angle": "JSON.Get(JSON.Path&\".rotation\")"
							}
						}
					],
					"sid": 224978106459319,
					"children": [
						{
							"eventType": "comment",
							"text": "Offsets are interpreted differently by different parts"
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Global - Character Rendering (Offsets)",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "variable",
									"name": "offsetScale",
									"type": "number",
									"initialValue": "1",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 280465840867975
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 354641686276935,
											"parameters": {
												"variable": "name",
												"comparison": 0,
												"value": "\"eyes\""
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 954945875856893,
											"parameters": {
												"variable": "name",
												"comparison": 0,
												"value": "\"eyebrows\""
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 803835129251064,
											"parameters": {
												"variable": "offsetScale",
												"value": "10"
											}
										}
									],
									"sid": 136614957908137,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 199704469550182,
											"parameters": {
												"variable": "name",
												"comparison": 0,
												"value": "\"nose\""
											}
										},
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 641543737658491,
											"parameters": {
												"variable": "name",
												"comparison": 0,
												"value": "\"lips\""
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 605690150219797,
											"parameters": {
												"variable": "offsetScale",
												"value": "20"
											}
										}
									],
									"sid": 587084052742400,
									"isOrBlock": true
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 911312623037668,
											"parameters": {
												"variable": "name",
												"comparison": 0,
												"value": "\"glasses\""
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 866224098255927,
											"parameters": {
												"variable": "offsetScale",
												"value": "25"
											}
										}
									],
									"sid": 223151291098735
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 429834496323152,
											"parameters": {
												"variable": "name",
												"comparison": 0,
												"value": "\"misc\""
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 321016036673409,
											"parameters": {
												"variable": "offsetScale",
												"value": "70"
											}
										}
									],
									"sid": 117740113920113,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 355152760552312,
													"parameters": {
														"first-value": "find(path, \"offset_x\")",
														"comparison": 4,
														"second-value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 572976740241185,
													"parameters": {
														"variable": "offsetScale",
														"value": "35"
													}
												}
											],
											"sid": 408780568160718
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-position",
											"objectClass": "CharacterPart",
											"sid": 437325316586109,
											"parameters": {
												"x": "Self.X+((JSON.Get(path&\".offset_x\")*offsetScale)*scale)",
												"y": "Self.Y+((JSON.Get(path&\".offset_y\")*offsetScale)*scale)"
											}
										}
									],
									"sid": 951154415174297
								}
							],
							"sid": 233878006206272
						},
						{
							"eventType": "comment",
							"text": "If this part is mirrored, modify certain aspects of it accordingly"
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 534550872367974,
									"parameters": {
										"variable": "mirrored"
									}
								}
							],
							"actions": [
								{
									"id": "set-mirrored",
									"objectClass": "CharacterPart",
									"sid": 384503148379599,
									"parameters": {
										"state": "mirrored"
									}
								},
								{
									"id": "set-angle",
									"objectClass": "CharacterPart",
									"sid": 104927779583482,
									"parameters": {
										"angle": "360-Self.Angle"
									}
								},
								{
									"id": "set-x",
									"objectClass": "CharacterPart",
									"sid": 485076943685677,
									"parameters": {
										"x": "CharacterHead.X-(Self.X-CharacterHead.X)"
									}
								}
							],
							"sid": 310165465806934
						}
					]
				}
			],
			"sid": 144180611067032
		},
		{
			"eventType": "comment",
			"text": "temp"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-instance-variable",
					"objectClass": "Text",
					"sid": 987565913412552,
					"parameters": {
						"instance-variable": "type",
						"comparison": 0,
						"value": "\"time\""
					}
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "Text",
					"sid": 499964652053378,
					"parameters": {
						"text": "zeropad(Date.GetHours(Date.Now),2)&(Date.GetSeconds(Date.Now)%2 ? \":\" : \"â€¢\")&zeropad(Date.GetMinutes(Date.Now),2)"
					}
				}
			],
			"sid": 549201169076781
		}
	],
	"sid": 778792192564054
}